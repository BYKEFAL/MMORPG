{% extends 'accounts/profile.html' %}

{%load static%}

{%block responses%}
<br>
<div class="row">
   <div class="col-lg-12">
      <div class='row'>
         <div class="featured-games header-text">
            <div class="heading-section">
               <h4>MY<em>Responses</em> </h4>
            </div>
            <table class="table table-striped ">
               <tr>
                  <td>
                     <img style="max-width: 70px; max-height:70px;" src="{{ post.image.url }}" class="self-image"
                        alt="Picture">
                  </td>
                  <td>
                     <p>{{ post.title }}</p>
                  </td>
                  <td>
                     <p>{{ post.dateCreation|date:'d-m-Y'}}</p>
                  </td>
                  <td>
                     <div class=" col-lg-4 main-border-button">
                        <a href="{%url 'posts:post_detail' post.id%}">Details</a>
                     </div>

                  </td>
               </tr>
               {%for resp in post.respondent.all%}
               <tr>
                  <td>
                  </td>
                  <td colspan="3">
                     <div class="card">
                        <div class="card-body p-2">
                           <div class="row">
                              <div class="col">

                                 <div class="flex-grow-1 flex-shrink-1">
                                    <div class="d-flex flex-start mt-4">
                                       <a class="me-3" href="#">
                                          <img class="rounded-circle shadow-1-strong"
                                             src="{%static 'assets/images/profile-header.jpg'%}" alt="avatar" width="65"
                                             height="65" />
                                       </a>
                                       <div class="flex-grow-1 flex-shrink-1">
                                          <div>
                                             <div class="d-flex justify-content-between align-items-center">

                                                <p class="mb-1">
                                                   {{resp.feedbackUser.username}}
                                                   <span class="small">-
                                                      {{resp.dateCreation|date:'d.m.Y H:i'}}</span>
                                                </p>

                                             </div>
                                             <p class="small mb-0">
                                                {{resp.text}}
                                             </p>
                                          </div>
                                          <div class="d-flex flex-row align-items-center">
                                             {%if not resp.acception%}
                                             <a href="{%url 'posts:feedback_accept' resp.id%}"
                                                class="btn small text-muted ml-2">Принять</a>
                                             <a href="{%url 'posts:feedback_delete' resp.id%}"
                                                class="btn small text-muted ml-2">Удалить</a>
                                             {%else%}
                                             <p class="btn btn-success small text-white ml-2">Вы приняли отклик!</p>
                                             <a href="{%url 'posts:feedback_no_accept' resp.id%}"
                                                class="btn btn-secondary small text-white ml-2">Отменить</a>
                                             {%endif%}

                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                        </div>
                     </div>
                  </td>
               </tr>
               {%endfor%}
            </table>
         </div>
      </div>
   </div>
</div>


{%endblock responses%}